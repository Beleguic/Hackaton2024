WA.onInit().then(async()=>{console.log("Scripting API ready");let e=WA.room.hashParameters.sport;e=decodeURI(e);let o=WA.room.hashParameters.id;switch(o=decodeURI(o),console.log(e),e){case"football":WA.room.showLayer("floors/foot"),WA.room.hideLayer("floors/floorblue");break;case"f1":WA.room.showLayer("floors/formuleone"),WA.room.hideLayer("floors/floorblue");break;default:WA.room.showLayer("floors/floorblue"),WA.room.hideLayer("floors/foot"),WA.room.hideLayer("floors/formuleone");break}const r=await WA.room.website.get("video-player");r.url="video_youtube.html?video="+o,r.visible=!0;const a=await WA.room.website.get("score-player");a.url="score.html?score="+o,a.visible=!0,n()});function n(){console.log("Setting up dynamic event polling for card events"),setInterval(()=>{Math.random()<.5?(t(),l(),console.log("Red card event simulated!")):(t(),s(),console.log("Yellow card event simulated!"))},3e5)}function t(){const e="https://cdn.pixabay.com/audio/2023/04/23/audio_65f312a7c6.mp3";var o=document.createElement("audio");o.autoplay=!0,o.load(),o.addEventListener("load",function(){o.play()},!0),o.src=e}function l(){WA.room.showLayer("carton/carton-rouge"),setTimeout(()=>{WA.room.hideLayer("carton/carton-rouge")},1e4)}function s(){WA.room.showLayer("carton/carton-jaune"),setTimeout(()=>{WA.room.hideLayer("carton/carton-jaune")},1e4)}

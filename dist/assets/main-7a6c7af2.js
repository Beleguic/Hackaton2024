WA.onInit().then(async()=>{console.log("Scripting API ready");let o=WA.room.hashParameters.sport.split("$");console.log(o);let t=decodeURI(o[0]),r=decodeURI(o[1]);switch(console.log(t),console.log(r),t){case"football":WA.room.showLayer("floors/foot"),WA.room.hideLayer("floors/floorblue");break;case"f1":WA.room.showLayer("floors/formuleone"),WA.room.hideLayer("floors/floorblue");break;default:WA.room.showLayer("floors/floorblue"),WA.room.hideLayer("floors/foot"),WA.room.hideLayer("floors/formuleone");break}const a=await WA.room.website.get("video-player");a.url="video_youtube.html?video="+r,a.visible=!0;const l=await WA.room.website.get("score-player");l.url="score.html?score="+r,l.visible=!0,s()});function s(){console.log("Setting up dynamic event polling for card events"),setInterval(()=>{Math.random()<.5?(n(),c(),console.log("Red card event simulated!")):(n(),i(),console.log("Yellow card event simulated!"))},3e5)}function n(){const e="https://cdn.pixabay.com/audio/2023/04/23/audio_65f312a7c6.mp3";var o=document.createElement("audio");o.autoplay=!0,o.load(),o.addEventListener("load",function(){o.play()},!0),o.src=e}function c(){WA.room.showLayer("carton/carton-rouge"),setTimeout(()=>{WA.room.hideLayer("carton/carton-rouge")},1e4)}function i(){WA.room.showLayer("carton/carton-jaune"),setTimeout(()=>{WA.room.hideLayer("carton/carton-jaune")},1e4)}
